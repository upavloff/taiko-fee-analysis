<!DOCTYPE html>
<html>
<head>
    <title>Debug Simulator</title>
</head>
<body>
    <h1>Simulator Debug</h1>
    <div id="output"></div>

    <script src="simulator.js"></script>
    <script>
        console.log("üß™ TESTING SIMULATOR IN BROWSER");

        try {
            // Test parameter creation
            const testParams = {
                mu: 0.0,
                nu: 0.0,
                H: 72,
                txsPerBatch: 100,
                minFee: 1e-8,
                targetBalance: 1.0,
                l1Volatility: 0.3,
                feeElasticity: 0.5
            };

            console.log("Parameters created:", testParams);

            // Test simulator creation
            const simulator = new TaikoFeeSimulator(testParams);
            console.log("‚úÖ Simulator created successfully");
            console.log("txsPerBatch:", simulator.txsPerBatch);
            console.log("gasPerTx:", simulator.gasPerTx);

            // Test simulation step
            const testBasefee = 0.075e9; // 0.075 gwei
            const result = simulator.step(testBasefee, new Date());
            console.log("‚úÖ Simulation step completed");
            console.log("Fee (gwei):", result.fee * 1e9);

            document.getElementById('output').innerHTML = `
                <h2>‚úÖ Simulator Working!</h2>
                <p>Gas per TX: ${simulator.gasPerTx} gas</p>
                <p>Fee: ${(result.fee * 1e9).toFixed(6)} gwei</p>
                <p>L1 Cost: ${(result.l1Cost * 1e9).toFixed(6)} gwei</p>
            `;

        } catch (error) {
            console.error("‚ùå Error:", error);
            document.getElementById('output').innerHTML = `
                <h2>‚ùå Error Found!</h2>
                <p style="color: red;">${error.message}</p>
                <p>Check console for details</p>
            `;
        }
    </script>
</body>
</html>