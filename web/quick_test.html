<!DOCTYPE html>
<html>
<head>
    <title>Quick Test</title>
</head>
<body>
    <h1>Quick Interface Test</h1>
    <div id="output"></div>

    <script src="components/specs-simulator.js"></script>

    <script>
        async function test() {
            const output = document.getElementById('output');

            try {
                // Test class availability
                output.innerHTML += '<p>Testing class availability...</p>';

                const tests = [
                    'ResearchFeeController',
                    'ResearchSimulationEngine',
                    'L1BasefeeSmoother',
                    'AlphaSimulationEngine'  // alias
                ];

                tests.forEach(className => {
                    if (typeof window[className] !== 'undefined') {
                        output.innerHTML += `<p>✅ ${className} available</p>`;
                    } else {
                        output.innerHTML += `<p>❌ ${className} missing</p>`;
                    }
                });

                // Test simulation
                output.innerHTML += '<p>Creating simulation engine...</p>';
                const engine = new AlphaSimulationEngine({
                    mu: 0.7,
                    alpha_data: 0.18,
                    nu: 0.2,
                    H: 72,
                    targetBalance: 1000,
                    vaultInit: 'target'
                });

                output.innerHTML += '<p>✅ Engine created successfully</p>';
                output.innerHTML += `<p>Parameters: μ=${engine.mu}, α_data=${engine.alpha_data}, ν=${engine.nu}</p>`;

                // Test one simulation step
                output.innerHTML += '<p>Running simulation step...</p>';
                const result = engine.simulateStep();
                output.innerHTML += '<p>✅ Simulation step completed</p>';
                output.innerHTML += `<p>Sample output: L1=${result.l1Basefee.toFixed(3)} gwei, L2=${result.estimatedFee.toFixed(3)} gwei</p>`;

            } catch (error) {
                output.innerHTML += `<p>❌ Error: ${error.message}</p>`;
                output.innerHTML += `<p>Stack: ${error.stack}</p>`;
            }
        }

        window.onload = test;
    </script>
</body>
</html>