<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Per-Gas Calculation</title>
</head>
<body>
    <h1>Test Per-Gas Fee Calculation</h1>
    <div id="test-results"></div>

    <script>
        function testPerGasCalculation() {
            // Test parameters matching the simulation
            const estimatedFee = 0.000001; // 1 µETH per transaction
            const gasPerTx = 2000; // 2000 gas per transaction

            // Original per-transaction calculation
            const perTxGwei = estimatedFee * 1e9; // Convert ETH to gwei

            // New per-gas calculation
            const perGasGwei = (estimatedFee * 1e9) / gasPerTx;

            // L1 basefee for comparison (typically 0.01 - 0.1 gwei in current market)
            const l1Basefee = 0.075; // 0.075 gwei

            const results = `
                <h2>Test Results</h2>
                <p><strong>Original per-transaction fee:</strong> ${perTxGwei.toFixed(3)} gwei</p>
                <p><strong>New per-gas fee:</strong> ${perGasGwei.toFixed(6)} gwei</p>
                <p><strong>L1 basefee (for comparison):</strong> ${l1Basefee} gwei</p>
                <p><strong>Scaling factor:</strong> ${gasPerTx} (gasPerTx)</p>
                <p><strong>Per-gas fee vs L1 ratio:</strong> ${(perGasGwei / l1Basefee).toFixed(2)}x</p>

                <h3>Validation</h3>
                <p>✅ Per-gas fee (${perGasGwei.toFixed(6)} gwei) is now comparable to L1 basefee (${l1Basefee} gwei)</p>
                <p>✅ Original per-tx fee was ${(perTxGwei / l1Basefee).toFixed(0)}x higher than L1 basefee</p>
                <p>✅ New per-gas fee makes fee chart comparable to L1 chart</p>
            `;

            document.getElementById('test-results').innerHTML = results;
        }

        testPerGasCalculation();
    </script>
</body>
</html>