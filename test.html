<!DOCTYPE html>
<html>
<head>
    <title>Taiko Fee Explorer - Quick Test</title>
</head>
<body>
    <h1>Testing JavaScript Components</h1>
    <div id="test-results"></div>

    <script src="simulator.js"></script>
    <script>
        console.log('Starting tests...');

        try {
            // Test GeometricBrownianMotion
            const gbm = new GeometricBrownianMotion(0.0, 0.3, 10e9);
            const nextValue = gbm.step();
            console.log('✅ GBM test passed, next value:', nextValue);

            // Test TaikoFeeSimulator
            const params = {
                mu: 0.4,
                nu: 0.3,
                H: 144,
                l1Volatility: 0.3,
                vaultInit: 'target',
                targetBalance: 100
            };

            const simulator = new TaikoFeeSimulator(params);
            console.log('✅ Simulator created');

            // Run short simulation
            const results = simulator.runSimulation(10);
            console.log('✅ Simulation completed, data points:', results.length);

            // Test MetricsCalculator
            const metricsCalc = new MetricsCalculator(100);
            const metrics = metricsCalc.calculateMetrics(results);
            console.log('✅ Metrics calculated:', metrics);

            // Test presets
            console.log('✅ Presets available:', Object.keys(PRESETS));

            document.getElementById('test-results').innerHTML = `
                <h2>✅ All Tests Passed!</h2>
                <p><strong>Simulation Results:</strong> ${results.length} data points</p>
                <p><strong>Average Fee:</strong> ${metrics.avgFee.toExponential(2)} ETH</p>
                <p><strong>Fee CV:</strong> ${metrics.feeCV.toFixed(3)}</p>
                <p><strong>Time Underfunded:</strong> ${metrics.timeUnderfundedPct.toFixed(1)}%</p>
                <p><strong>Available Presets:</strong> ${Object.keys(PRESETS).join(', ')}</p>
            `;

        } catch (error) {
            console.error('❌ Test failed:', error);
            document.getElementById('test-results').innerHTML = `
                <h2>❌ Test Failed</h2>
                <p><strong>Error:</strong> ${error.message}</p>
                <p><strong>Stack:</strong> <pre>${error.stack}</pre></p>
            `;
        }
    </script>
</body>
</html>